{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": 1500,
  "height": 600,
  "data": {
    "url": "https://raw.githubusercontent.com/Gorgon3179/visualisationproject2/main/mergedmod2.csv"
  },
  "params": [
    {
      "name": "Category_selection",
      "bind": {
        "input": "select",
        "options": [0, 1, 2, 3, 4, 5, 6, 7, 8, 9],
        "labels": [
          "Food and live animals",
          "Beverages and tobacco",
          "Crude materials, inedible, except fuels",
          "Mineral fuels, lubricants and related materials",
          "Animal and vegetable oils, fats and waxes",
          "Chemicals and related products, nes",
          "Manufactured goods classified chiefly by material",
          "Machinery and transport equipment",
          "Miscellaneous manufactured articles",
          "Commodities and transactions not classified elsewhere in the SITC"
        ],
        "name": "Select Category: "
      },
      "value":0 
    }
  ],
  "vconcat": [
    {
      "layer": [
        {
          "mark": {
            "type": "area",
            "interpolate": "monotone",
            "stroke": "black",
            "strokeWidth": 0.2
          },
          "width": 1500,
          "height": 500,
          "transform": [
            {
              "filter": "datum.code == Category_selection"
            },
            {
              "filter": { "param": "brush" }
            },
            {
              "filter": "datum.type == 'export'"
            }
          ],
          "encoding": {
            "x": {
              "field": "date",
              "type": "temporal",
              "title": "Date",
              "timeUnit": "yearmonth",
              "axis": {
                "labelFontSize": 18,
                "titleFontSize": 20,
                "font": "body"
              }
            },
            "y": {
              "aggregate": "sum",
              "field": "value",
              "type": "quantitative",
              "title": "",
              "stack": "zero",
              "axis": {
                "labelFontSize": 18,
                "titleFontSize": 20,
                "font": "body"
              }
            },
            "color": {
              "field": "subcode",
              "type": "nominal",
              "title": "Goods",
              "scale": {
                "range": [
                  "#fde725",
                  "#b5de2b",
                  "#6ece58",
                  "#35b779",
                  "#1f9e89",
                  "#26828e",
                  "#31688e",
                  "#3e4989",
                  "#482878",
                  "#440154"
                ]
              },
              "legend": {
                "columns": 1,
                "orient": "right",
                "labelFontSize": 20,
                "titleFontSize": 20,
                "labelFont": "body",
                "titleFont": "body",
                "symbolLimit": 100,
                "labelLimit": 500,
                "labelOverlap": false
              }
            },
            "tooltip": [
              {
                "field": "subcode",
                "type": "nominal",
                "title": "Good",
                "fill": "black",
                "fontSize": 20,
                "font": "body"
              },
              {
                "field": "date",
                "type": "temporal",
                "title": "Date",
                "timeUnit": "yearmonth",
                "fill": "black",
                "fontSize": 20,
                "font": "body"
              },
              {
                "field": "value",
                "type": "quantitative",
                "title": "Exports (Millions of Dollars)",
                "format": ".2f",
                "fill": "black",
                "fontSize": 20,
                "font": "body"
              }
            ]
          }
        },
        {
          "mark": {
            "type": "area",
            "interpolate": "monotone",
            "stroke": "black",
            "strokeWidth": 0.5
          },
          "transform": [
            {
              "filter": "datum.code == Category_selection"
            },
            {
              "filter": { "param": "brush" }
            },
            {
              "filter": "datum.type == 'import'"
            },
            {
              "calculate": "abs(datum.value)",
              "as": "positive_import_value"
            }
          ],
          "encoding": {
            "x": {
              "field": "date",
              "type": "temporal",
              "title": "Date",
              "timeUnit": "yearmonth",
              "axis": {
                "labelFontSize": 18,
                "titleFontSize": 20,
                "font": "body"
              }
            },
            "y": {
              "aggregate": "sum",
              "field": "value",
              "type": "quantitative",
              "title": "Exports and Imports ($Millions)",
              "stack": "zero",
              "axis": {
                "labelFontSize": 18,
                "titleFontSize": 20,
                "font": "body"
              }
            },
            "color": {
              "field": "subcode",
              "type": "nominal",
              "title": "Goods",
              "scale": {
                "range": [
                  "#fde725",
                  "#b5de2b",
                  "#6ece58",
                  "#35b779",
                  "#1f9e89",
                  "#26828e",
                  "#31688e",
                  "#3e4989",
                  "#482878",
                  "#440154"
                ]
              },
              "legend": {
                "columns": 1,
                "orient": "right",
                "labelFontSize": 20,
                "titleFontSize": 20,
                "labelFont": "body",
                "titleFont": "body",
                "symbolLimit": 100,
                "labelLimit": 500,
                "labelOverlap": false
              }
            },
            "tooltip": [
              {
                "field": "subcode",
                "type": "nominal",
                "title": "Good",
                "fill": "black",
                "fontSize": 20,
                "font": "body"
              },
              {
                "field": "date",
                "type": "temporal",
                "title": "Date",
                "timeUnit": "yearmonth",
                "fill": "black",
                "fontSize": 20,
                "font": "body"
              },
              {
                "field": "positive_import_value",
                "type": "quantitative",
                "title": "Imports ($Millions)",
                "format": ".2f",
                "fill": "black",
                "fontSize": 20,
                "font": "body"
              }
            ]
          }
        }
      ]
    },
    {
      "width": 1500,
      "height": 120,
      "mark": "line",
      "params": [
        {
          "name": "brush",
          "select": {
            "type": "interval",
            "encodings": ["x"]
          }
        }
      ],
      "transform": [
        {
          "filter": "datum.type == 'export' || datum.type == 'import'"
        },
        {
          "calculate": "datum.value",
          "as": "adjusted_value"
        }
      ],
      "encoding": {
        "x": {
          "field": "date",
          "type": "temporal",
          "title": "Brush to Select Time",
          "timeUnit": "yearmonth",
          "axis": {
            "labelFontSize": 18,
            "titleFontSize": 20,
            "font": "body"
          }
        },
        "y": {
          "aggregate": "sum",
          "field": "adjusted_value",
          "type": "quantitative",
          "title": "Net Trade ($Millions)",
          "axis": {
            "labelFontSize": 18,
            "titleFontSize": 20,
            "tickCount": 3,
            "grid": false,
            "tickSize": 0,
            "domain": false,
            "font": "body"
          }
        },
        "color": {
          "value": "black"
        }
      }
    }
  ]
}
